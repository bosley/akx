(cjit-load-builtin println :root "tests/builtins/println.c")

(println "=== Testing :as Alias Edge Cases ===")
(println "")

(println "Test 1: Loading same builtin with different symbols")
(cjit-load-builtin add :root "tests/builtins/add.c")
(cjit-load-builtin + :root "tests/builtins/add.c" :as "add")
(let sum1 (add 1 2))
(let sum2 (+ 3 4))
(println "  add 1 2 =" sum1)
(println "  + 3 4 =" sum2)
(assert-eq sum1 3 "add without alias should work")
(assert-eq sum2 7 "+ with alias should work")

(println "Test 2: Reloading builtin with :as")
(cjit-load-builtin + :root "tests/builtins/add.c" :as "add")
(let sum3 (+ 5 6))
(println "  + 5 6 (reloaded) =" sum3)
(assert-eq sum3 11 "reloaded + should still work")

(println "Test 3: Using :as with regular names")
(cjit-load-builtin myprint :root "tests/builtins/println.c" :as "println")
(myprint "  Custom aliased println works!")

(println "Test 4: Mixing aliased and non-aliased builtins")
(cjit-load-builtin - :root "tests/builtins/sub.c" :as "sub")
(let diff (- 20 (add 3 4)))
(println "  - 20 (add 3 4) =" diff)
(assert-eq diff 13 "mixed builtins should work together")

(println "")
(println "All edge case tests passed!")

